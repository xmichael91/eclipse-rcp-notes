---
layout: post
title:  "Подключение сторонних библиотек с помощью Eclipse Orbit"
categories: eclipse
---

Зачастую, при написании плагинов или приложений на платформе OSGi возникает необходимость использования сторонних библиотек, не включенных в состав установки Eclipse IDE. Несмотря на существование возможности добавления JAR-библиотеки в classpath классическим способом, рекомендуемый способ управления зависимостями в рамках платформы OSGi -- это объявление зависимостей вашего плагина директивой *Require-Bundle*. Соответственно, любая зависимость модуля должна быть тоже модулем OSGi. Некоторые популярные библиотеки уже совместимы с OSGi, но в подавляющем большинстве случаев имеется лишь обычный JAR файл, который не получится использовать как плагин.

Для решения этой проблемы существует несколько способов:
* применение специального инструмента Eclipse для преобразования JAR-библиотеки в модуль OSGi
* применение Eclipse Tycho для пакетного преобразования библиотек из репозитория Maven в модули OSGi
* подключение стороннего репозитория библиотек [Eclipse Orbit](https://www.eclipse.org/orbit/)

Первые два способа позволяют получить требуемые библиотеки в виде OSGi-совместимых модулей локально на машине разработчика. После этого можно будет установить эти модули в Eclipse IDE и начать использовать в своих проектах. Однако, если вы желаете использовать систему контроля версий, к примеру, если вы не единственный разработчик проекта или работаете над opensource-проектом, то вам придётся обязывать других разработчиков проделывать все эти манипуляции со своими IDE или передавать все необходимые библиотеки вместе со своим проектом.

> Один из ключевых принципов систем управления зависимостями заключается в отделении вашего кода от его зависимостей. Для привлечения других разработчиков не придётся вместе с основной кодовой базой передавать все необходимые библиотеки (например, помещать их в git-репозиторий).

Последний из названных способов придуман *специально* для решения этой задачи. Он минимизирует трудозатраты на подключение библиотеки как для вас, так и для других разработчиков проекта. Проект Eclipse Orbit поддерживает готовый Eclipse-совместимый репозиторий популярных библиотек в виде OSGi-модулей. Всё, что остается сделать вам, это подключить репозиторий к вашей Eclipse IDE:
* перейдите на страницу проекта [Eclipse Orbit](https://download.eclipse.org/tools/orbit/downloads/)
* выберите наиболее свежую версию репозитория в списке
* в середине открывшейся страницы в разделе *Orbit Build Repository* вы увидите ссылку на p2-репозиторий, скопируйте её в буфер обмена
* в Eclipse IDE, перейдите в настройки: Window→Preferences→Plug-in Development→Target Platform
* выберите активную Target Plarform и нажмите кнопку *Edit...*
* добавьте репозиторий, нажав кнопку *Add...*:
    * выберите *Software Site* и нажмите *Next*
    * вставьте URL репозитория из буфера обмена и нажмите Enter
    * убедившись, что установлен флажок *Group by category*, в появившемся дереве выберите интересующие библиотеки и их исходный код (Source) и нажмите *Finish*
* примените изменения, нажав кнопку *Apply and Close*

После этого, Eclipse некоторое время будет скачивать необходимые модули и перекомпилировать ваши проекты. Теперь вы можете использовать библиотеки, указывая их как зависимости в разделе Required Bundles вашего плагина.

### Дополнительная информация

[Vogella / How to create Eclipse plug-ins from Java libraries](https://www.vogella.com/tutorials/EclipseJarToPlugin/article.html)
